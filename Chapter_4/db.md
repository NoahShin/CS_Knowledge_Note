# 데이터베이스

# 4.1 데이터베이스의 기본

## DBMS, DataBase Management System
![](https://velog.velcdn.com/images/noahshin__11/post/12fdac98-8bac-4bf3-bf07-74967e8abdfe/image.png)
응용프로그램: 노드 , 자바
DMBS : MySQL
데이터베이스: 창고(?)

## 4.1.1 엔터티
![](https://velog.velcdn.com/images/noahshin__11/post/4f02ef82-9309-4f77-9ffd-445dfc526ac0/image.png)

엔터티(entity)는 사람. 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사를 의미


#### 약한 엔터티와 강한 엔터티
- 엔터티는 약한 엔터티와 강한 엔터티로 나뉜다. 

- 예를 들어 방은 건물 안에만 존재하기 때문에 방은 약한 엔터티라고 할 수 있고 건물은 강 한 엔터티라고 할 수 있습니다.

## 4.1.2 릴레이션

- relation 은 디비에서 정보를 구분하여 저장하는 기본 단위.

- 엔터티에 관한 데이터를 디비는 릴레이션 하나에 담아서 관리.

![](https://velog.velcdn.com/images/noahshin__11/post/0e817e82-af21-4554-87b8-e55aad8c90dd/image.png)
위 그림처럼 회원이라는 엔터티가 
디비에서 관리될 때 
릴레이션으로 변화된 것을 볼 수 있다.

릴레이션은 RDBMS 에선 **테이블**
NoSQL 에선 **컬렉션**

## 4.1.3 속성

- Attribute 는 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보. 

"차"가 엔터티라면 
차 넘버, 바퀴 수, 차 색깔, 차종 등 속성

## 4.1.4 도메인
도메인이란 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합.

ex) 성별이라는 속성이 있다면 이 속성이 가질 수 있는 값는 {남, 녀} 라는 집합.

## 4.1.5 필드와 레코드
![](https://velog.velcdn.com/images/noahshin__11/post/6f07f9f4-8ff0-4e46-9c2b-b667580b071b/image.png)

### 필드타입
(MySQL 기준)

#### 숫자타입
![](https://velog.velcdn.com/images/noahshin__11/post/3e4a4361-cb8f-4870-87fb-d87b98ea1db4/image.png)

#### 날짜 타입
> - **DATE**
날짜 부분은 있지만 시간 부분은 없는 값에 사용됩니다. 
지원되는 범위는 1000-01- 01〜9999-12-31입니다. 
3바이트의 용량을 가집니다.
- **DATETIME**
날짜 및 시간 부분을 모두 포함하는 값에 사용됩니다. 
지원되는 범위는 1000-01-01 00:00:00에서 9999-12-31 23:59:59입니다. 
8바이트의 용량을 가집니다.
- **TIMESTAMP**
날짜 및 시간 부분을 모두 포함하는 값에 사용됩니다. 
1970—01—01 00:00:01 에서 2038- 01-19 03:14:07까지 지원합니다. 
4바이트의 용량을 가집니다.


#### 문자 타입
> - CHAR
예를 들어 CHAR(30)이라면 최대 30글자까지 입력할 수 있습니다.
CHAR는 테이블을 생성할 때 선언한 길이로 고정되며 길이는 0에서 255 사이의 값을 가집니다. 레코드를 저장할 때 무조건 선언한 길이 값으로 ‘고정’해서 저장됩니다.
- VARCHAR
VARCHAR는 가변 길이 문자열입니다. 길이는 0에서 65,535 사이의 값으로 지정할 수 있으며, 입력된 데이터에 따라 용량을 가변시켜 저장합니다. 예를 들어 10글자의 이메 일을 저장할 경우 10글자에 해당하는 바이트 + 길이기록용 1바이트로 저장하게 됩니다.
VARCHAR(10000)으로 선언했음에도 말이죠.

그렇기 때문에 지정된 형태에 따라 저장된 CHAR의 경우 검색에 유리하며, 검색을 별로
하지 않고 유동적인 길이를 가진 데이터는 VARCHAR로 저장하는 것이 좋습니다.


#### TEXT 와 BLOB 
>- TEXT는 큰 문자열 저장에 쓰며 주로 게시판의 본문을 저장할 때 씁니다.
- BLOB은 이미지, 동영상 등 큰 데이터 저장에 씁니다. 그러나 보통은 아마존의 이미지 호 스팅 서비스인 S3를 이용하는 등 서버에 파일을 올리고 파일에 관한 경로를 VARCHAR 로 저장합니다.

#### ENUM 과 SET

ENUM과 SET 모두 문자열을 열거한 타입


> - ENUM은 ENUMfx—small’, ‘small’, ‘medium’, ‘large’, ‘x—large’) 형태로 쓰이며, 이 중에서 하나만 선택하는 단일 선택만 가능하고 ENUM 리스트에 없는 잘못된 값을 삽입하면 빈 문자열이 대신 삽입됩니다. ENUM을 이용하면 x-small 등이 0, 1 등으로 매핑되어 메모 리를 적게 사용하는 이점을 얻습니다. ENUM은 최대 65,535개의 요소들을 넣을 수 있습 니다.
- SET은 ENUM과 비슷하지만 여러 개의 데이터를 선택할 수 있고 비트 단위의 연산을 할 수 있으며 최대 64개의 요소를 집어넣을 수 있다는 점이 다릅니다.
참고로 ENUM이나 SET을 쓸 경우 공간적으로 이점을 볼 수 있지만 애플리케이션의 수 정에 따라 데이터베이스의 ENUM이나 SET에서 정의한 목록을 수정해야 한다는 단점이 있습니다.


## 4.1.6 관계
![](https://velog.velcdn.com/images/noahshin__11/post/9233bc84-7733-48dd-b0b6-1cbf0e033b43/image.png)
위 그림만 봐서는 아는것도 모르겠다.

### 1:1 
![](https://velog.velcdn.com/images/noahshin__11/post/f4bea9ee-08db-423b-9b6d-e270bffea196/image.png)

### 1:N
![](https://velog.velcdn.com/images/noahshin__11/post/398fda3f-8ae9-4461-9dd4-d6887dc190da/image.png)

### N:M
![](https://velog.velcdn.com/images/noahshin__11/post/f0c5a6bd-d0c0-4eec-9ae8-e0cd81da4dc1/image.png)

## 4.1.7 키 
![](https://velog.velcdn.com/images/noahshin__11/post/69479560-dcf8-471a-8f6e-10556fdc2733/image.png)

### 기본키 PK 
당연히 중복 안됨

기본키는 자연키 또는 인조키 중에 골라 설정.

> **자연키**
예를 들어 유저 테이블을 만든다고 가정하면 주민등록번호, 이름, 성별 등의 속성이 있습 니다. 이 중 이름, 성별 등은 중복된 값이 들어올 수 있으므로 부적절하고 남는 것은 주민 등록번호입니다. 이런 식으로 중복된 값들을 제외하며 중복되지 않는 것을 ‘자연스레’ 뽑 다가 나오는 키를 자연키라고 합니다. 자연키는 언젠가는 변하는 속성을 가집니다.

> 인조키
예를 들어 유저 테이블을 만든다고 했을 때 회원 테이블을 생성한다고 가정하면 주민등록 번호, 이름, 성별 등의 속성이 있습니다. 여기에 인위적으로 유저 아이디를 부여합니다. 이를 통해 고유 식별자가 생겨납니다. 오라클은 sequence, MySQL은 auto increment 등 으로 설정합니다. 이렇게 인위적으로 생성한 키를 인조키라고 합니다. 자연키와는 대조적 으로 변하지 않습니다. 따라서 보통 기본키는 인조키로 설정합니다.


### 외래키 FK

![](https://velog.velcdn.com/images/noahshin__11/post/11dc4de2-da92-4c11-83f1-4236e80f916d/image.png)

**후보키**
후보키 (candidate key)는 기본키가 될 수 있는 후보들이며 유일성과 최소성을 동시에 만족 하는 키입니다.

**대체키**
대체키(alternate key)는 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키들을 말합니다.

**슈퍼키**
슈퍼키(super key)는 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키입니다.









